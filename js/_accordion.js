"use strict";class Accordion{constructor(t){Object.assign(this,{accordionClassName:"accordion",buttonSelector:".accordion__button",contentWrapperClassName:"accordion__content-wrapper",initStateDataAttribute:"accordionOpen",additionalClassDataAttribute:"accordionClass"},t),this._headingElements=Array.from(document.querySelectorAll("."+this.accordionClassName)),this._headingElements.forEach(t=>{let e=this._getInitState(t);this._addButton(t,e);let n=this._getContent(t),i=document.createElement("div");i.classList.add(this.contentWrapperClassName),e||(i.hidden=!0);let a=t.dataset[this.additionalClassDataAttribute];if(a){a.split(" ").forEach(t=>{i.classList.add(t)})}n.forEach(t=>{i.appendChild(t)}),t.parentNode.insertBefore(i,t.nextElementSibling)}),document.addEventListener("click",t=>{let e=t.target.closest(this.buttonSelector);if(!e)return;let n="true"===e.getAttribute("aria-expanded")||!1;e.setAttribute("aria-expanded",!n);let i=e.parentNode.nextElementSibling;if(!n){i.style.height=0,i.hidden=!1;let t=i.scrollHeight;i.style.height=t+"px"}else{let t=i.scrollHeight;i.style.height=t+"px",i.addEventListener("transitionend",()=>{i.style.height="auto",i.hidden=!0,i.style.transitionDuration=""},{once:!0}),setTimeout(()=>{i.style.transitionDuration="75ms",i.style.height=0},0)}})}_getInitState(t){let e,n=t.dataset[this.initStateDataAttribute];switch(n){case void 0:e=!1;break;case"":e=!0;break;default:e=window.innerWidth>=n}return e}_addButton(t,e){t.innerHTML=`<button class="accordion__button" aria-expanded="${e}" type="button">\n                            ${t.textContent}\n                            <svg class="accordion__button-icon" width="32" height="32">\n                              <use href="img/svg/_sprite.svg#icon-arrow"></use>\n                            </svg>\n                          </button>`}_getContent(t){let e=[];for(;t.nextElementSibling&&!t.nextElementSibling.classList.contains(this.accordionClassName);)e.push(t.nextElementSibling),t=t.nextElementSibling;return e.forEach(t=>{t.parentNode.removeChild(t)}),e}}function initAccordion(){return new Accordion}export default initAccordion;