"use strict";const MAIN_SELECTOR=".pickup",COORDS_ELEMENT_SELECTOR=".radiocheck__input",COORDS_DATA_ATTR_NAME="pickupCoords",COORDS_DEVIDER=",",MAP_SRC="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=43f5c4bd-e478-41db-b3c6-29fbb56b4380",MAP_ID="map",MAP_CLASS="pickup__map",PIN_COLOR="#01768b";class Pickup{constructor(e){this.element=e,this.mapElement=void 0,this.map=void 0,this.coords=this._readCoords(),this._loadMap(()=>{this._createMapElement();let e=this.element.querySelector(":checked").dataset.id,t=this.coords[e];this._initMap(t),this._addPlacemarks(this.coords)}),this.element.addEventListener("change",e=>{let t=this.coords[e.target.dataset.id];this.map.panTo(t,{flying:1})})}_loadMap(e){let t=document.createElement("script");t.src=MAP_SRC,document.body.append(t),t.onload=()=>{window.ymaps.ready(e)}}_createMapElement(){this.mapElement=document.createElement("div"),this.mapElement.id="map",this.mapElement.classList.add(MAP_CLASS),this.element.append(this.mapElement)}_initMap(e){this.map=new window.ymaps.Map("map",{center:e,zoom:14,controls:["zoomControl","fullscreenControl"]})}_readCoords(){let e=[],t=this.element.querySelectorAll(".radiocheck__input");for(let a=0;a<t.length;a++){let i=t[a].dataset.pickupCoords,s=i.indexOf(","),o=+i.slice(0,s),n=+i.slice(s+1);e.push([o,n]),t[a].setAttribute("data-id",a)}return e}_addPlacemarks(e){let t;e.forEach(e=>{t=new window.ymaps.Placemark(e,{},{preset:"islands#dotIcon",iconColor:"#01768b"}),this.map.geoObjects.add(t)})}}function initPickup(){let e=document.querySelector(".pickup");if(e)return new Pickup(e)}export default initPickup;